# FinVM: Your AI Co-Pilot for the Stock Market

<p align="center">
  <strong>An advanced, multi-page web application designed to democratize sophisticated financial analysis and machine learning tools for retail investors and finance enthusiasts.</strong>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Python-3.11+-blue.svg" alt="Python version">
  <img src="https://img.shields.io/badge/Framework-Streamlit-red.svg" alt="Streamlit">
  <img src="https://img.shields.io/badge/Database-Supabase-green.svg" alt="Supabase">
  <img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License">
</p>

<p align="center">
  <a href="#-about-the-project">About</a> ‚Ä¢
  <a href="#-in-depth-feature-breakdown-page-by-page">Features</a> ‚Ä¢
  <a href="#-the-ai--machine-learning-pipeline">The AI Pipeline</a> ‚Ä¢
  <a href="#-local-setup--installation">Local Setup</a> ‚Ä¢
  <a href="#-roadmap">Roadmap</a> ‚Ä¢
  <a href="#-author">Author</a>
</p>

---

## üìñ About The Project

FinVM was created to address the significant gap between the analytical tools available to institutional firms and those accessible to everyday retail investors. The stock market is inundated with complex data, and making informed, data-driven decisions can be a formidable challenge.

This project serves as an all-in-one platform that leverages the power of Machine Learning to simplify this complexity. It provides predictive insights, deep market analysis, and a risk-free environment for learning, empowering users to navigate the market with greater confidence.

### üì∏ Demo 

A live, deployed version of the application can be found here: **https://eqnd4tgj43nxjcef5wy7kz.streamlit.app/**


## üîé In-Depth Feature Breakdown (Page by Page)

This section provides a granular walkthrough of every feature available on each page of the FinVM application.

---
### üè† Main App & Home Page (`app.py`)
This page serves as the secure entry point and personalized central dashboard for the user.

#### Key Features Explained
* **Secure Authentication**: A complete login and signup system that gates access to the application. All user data is managed securely through a **Supabase** backend.
* **At-a-Glance Dashboard**: Upon login, the user is greeted with four key real-time metrics:
    * **Live Portfolio Value**: The total current market value of the user's holdings from the Portfolio Manager.
    * **Game Balance**: The user's current virtual currency from the Trading Game.
    * **AI Confidence Score**: A metric representing the AI's overall confidence in its current predictions.
    * **Market Sentiment**: A simple "Bullish," "Bearish," or "Neutral" indicator of the overall market mood.
* **Personalized AI Alerts**: This section displays custom alerts generated by the AI, specifically for the logged-in user, warning them about risks or highlighting opportunities.
* **Live NIFTY 50 Heatmap**: A real-time visualization of the entire NIFTY 50 index, allowing for a quick understanding of the market's performance.
* **Recent Activity Feed**: A personalized feed that shows the user's most recent actions, such as trades executed in the game or achievements they've unlocked.

#### How Machine Learning is Implemented Here
* **Market Sentiment**: The sentiment indicator is a direct output of a **Natural Language Processing (NLP) pipeline**. The system scrapes dozens of headlines from financial news sites in real-time. Each headline is processed by the **VaderSentiment** model, which analyzes the text and assigns a sentiment score. These scores are aggregated to produce the final "Bullish" or "Bearish" rating.
* **AI Confidence Score**: This score is derived from the **ensemble prediction model**. When the Random Forest and Gradient Boosting models make a prediction, the system measures the difference between their outputs. A small difference signifies high agreement and thus a high confidence score, which is then displayed here.
* **Personalized AI Alerts**: This feature is a sophisticated interaction between the AI and the user's data.
    1.  The AI runs its predictive models to generate a list of all bullish and bearish stocks.
    2.  It simultaneously analyzes the user's portfolio (from the **Portfolio Manager**).
    3.  If a stock the user owns appears on the AI's "bearish" list, it generates a **"Portfolio Review Alert"**.
    4.  If a top-rated "bullish" stock is *not* in the user's portfolio, it generates an **"Opportunity Alert"**.

---
### ü§ñ AI Dashboard (`1_Dashboard.py`)
This is the core of the application, where users interact directly with the AI's predictive insights.

#### Key Features Explained
* **Live Prediction Table**: An interactive table of NIFTY 50 stocks showing not just price data, but also the AI's **10-day predicted return**, its **confidence score** for that prediction, and a calculated **risk level**.
* **Top 5 AI Picks**: Dedicated cards showcasing the top 5 stocks the AI is most bullish or bearish on, providing clear, actionable ideas.
* **Interactive Prediction Chart**: A powerful visualization tool where a user can select any stock to see its **historical price plotted against the AI's historical predictions**, showing how well the model has performed over time.
* **Model Transparency Tools**: To ensure the AI is not a "black box," two charts are provided:
    * **Model Performance**: Displays the **Root Mean Squared Error (RMSE)** and **R¬≤ Score** of the model for the selected stock, validating its historical accuracy.
    * **Feature Importance**: A chart that visualizes which data factors (e.g., Momentum, Sentiment, Volatility) were most influential in the AI's decision-making process for that specific stock.

#### How Machine Learning is Implemented Here
This page is a direct interface for the **supervised learning pipeline**:
* **Predictions**: The "10-day predicted return" is the primary output. For each stock, the system takes the **7+ engineered features** (RSI, Volatility, Sentiment Score, etc.), scales them, and feeds them into the pre-trained **Ensemble Model** (Random Forest + Gradient Boosting) to get a final, averaged prediction.
* **Feature Importance**: This chart is generated directly from the trained **Random Forest** model. The algorithm intrinsically knows how much each feature contributes to reducing prediction error across its decision trees. This data is extracted and visualized to show the "AI's reasoning."
* **Model Performance**: The **RMSE** and **R¬≤** metrics are calculated during the model's training phase by comparing its predictions on a hidden test set of historical data against the actual outcomes. These stored metrics are displayed here to prove the model's validity.

---
### üíº Portfolio Manager (`2_Portfolio.py`)
This page allows users to apply the AI's insights to their real-world investments.

#### Key Features Explained
* **Real Portfolio Tracking**: Full functionality to add, edit, and remove stock holdings.
* **In-Depth Financial Metrics**: Automatically calculates and displays total portfolio value, P&L, and percentage return.
* **Portfolio Allocation Pie Chart**: A visual breakdown of portfolio diversification.
* **Watchlist & Export**: A separate watchlist for tracking stocks and a feature to export holdings to a CSV file.

#### How Machine Learning is Implemented Here
* **AI-Powered Suggestions**: This feature connects the user's personal data with the AI engine. The system takes the general **AI recommendations** (top bullish/bearish picks) and filters them to be contextually relevant to the user. For example, it will only suggest selling a stock if that stock is actually in the user's portfolio.
* **Portfolio Risk Analysis**: The risk table iterates through the user's holdings and, for each stock, calls the AI's **risk assessment model**. This model calculates a risk score based on ML-derived factors like historical **volatility** and extreme **RSI** levels.

---
### üéÆ Virtual Trading Game (`3_Trading_Game.py`)
This page is a gamified, risk-free environment for learning and practice.

#### Key Features Explained
* **Risk-Free Simulator**: A complete trading game with a virtual balance, leaderboard, and full transaction history.
* **Gamification**: An achievement system and a daily prediction challenge to engage users and test their market intuition.

#### How Machine Learning is Implemented Here
* Machine Learning is **not directly used** to generate features on this page. This page is a **simulation environment**. However, it relies on the same **real-time price data** that is fed into the ML models on the other pages, ensuring the simulation is realistic and relevant.

---
### üîç Market Insights (`4_Market_Insights.py`)
This page uses ML for discovery and analysis rather than direct prediction.

#### Key Features Explained
* **Stock Clustering**: An interactive scatter plot that groups stocks with similar financial DNA.
* **Sentiment Analysis**: A word cloud visualizing trending topics from financial news.
* **Market Health Score**: A unique metric that combines several factors into a single score for the overall market's health.

#### How Machine Learning is Implemented Here
* **Stock Clustering**: This is a direct application of **Unsupervised Machine Learning**. The system takes the engineered feature set for all 50 stocks and applies the **K-Means Clustering** algorithm. The algorithm identifies the optimal way to group the stocks into a predefined number of clusters, revealing hidden relationships and peer groups without any prior training.
* **Sentiment Word Cloud & Health Score**: These are powered by the same **NLP pipeline** as the other sentiment features. The system scrapes news, uses **VaderSentiment** to score each headline, and then (1) counts the frequency of significant words for the **Word Cloud** and (2) aggregates all the scores to contribute to the final **Market Health Score**.
---

## üíª Tech Stack & Architectural Choices

| Category                  | Technologies                                                                                             |
| ------------------------- | -------------------------------------------------------------------------------------------------------- |
| **Frontend** | `Streamlit`                                                                                              |
| **Backend & Core** | `Python`, `Pandas`, `NumPy`                                                                              |
| **Database & Auth** | `Supabase` for Authentication & Managed PostgreSQL Database                                               |
| **Machine Learning** | `Scikit-learn`, `VaderSentiment`, `TextBlob`                                                             |
| **Data Fetching** | `yfinance`, `Requests`, `BeautifulSoup4`, `Trafilatura`                                                  |
| **Data Visualization** | `Plotly`                                                                                                 |
---

## üß† The AI & Machine Learning Pipeline

The core of FinVM is a sophisticated data pipeline that transforms raw market data into actionable, AI-driven insights.

#### **Step 1: Data Collection & Aggregation**
The pipeline begins by sourcing data from two distinct streams:
* **Quantitative Data**: Several years of historical daily stock data (OHLCV) are fetched from Yahoo Finance.
* **Qualitative Data**: The latest financial news headlines are scraped from reputable sources to capture market sentiment.

#### **Step 2: Feature Engineering & Preprocessing**
Raw data is transformed into a rich, high-dimensional feature set. This includes 7+ technical indicators like **Momentum, Volatility, RSI, and VWAP Deviation**, plus a **News Sentiment Score** generated using Natural Language Processing (NLP). All features are then normalized using `StandardScaler`.

#### **Step 3: Supervised Learning - The Ensemble Prediction Engine**
FinVM uses an **Ensemble Learning** approach to predict the **10-day future return** of a stock:
1.  **Random Forest Regressor**: Excels at handling complex, non-linear relationships.
2.  **Gradient Boosting Regressor**: Incrementally builds models to correct the errors of previous ones.

#### **Step 4: Prediction, Interpretation & Validation**
* **Prediction**: The final forecast is the arithmetic mean of both models' outputs.
* **Interpretation**: An **AI Confidence Score** is calculated based on model agreement, and **Feature Importance** charts provide transparency.
* **Validation**: The system evaluates model performance using standard metrics like **RMSE** and **R¬≤ Score**.

#### **Step 5: Unsupervised Learning for Market Insights**
The "Market Insights" page uses **K-Means Clustering** to segment stocks into groups with similar financial DNA, helping to reveal the underlying market structure.

---

## üöÄ Local Setup & Installation

Follow these steps to get the FinVM application running on your local machine.

### Prerequisites
* Python 3.9+
* Pip package manager
* Git

### Installation Guide
1.  **Clone the Repository**
    ```bash
    git clone [https://github.com/hvm007/FinVM.git](https://github.com/hvm007/FinVM.git)
    cd FinVM
    ```

2.  **Create and Activate a Virtual Environment**
    ```bash
    # Create the environment
    python -m venv venv

    # Activate it
    # On Windows:
    .\venv\Scripts\Activate
    # On macOS/Linux:
    source venv/bin/activate
    ```

3.  **Install Dependencies**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Set Up Environment Variables**
    * Create a file named `.env` in the root of your project.
    * Add your Supabase credentials to this file:
        ```env
        SUPABASE_URL="YOUR_SUPABASE_URL_HERE"
        SUPABASE_KEY="YOUR_SUPABASE_KEY_HERE"
        ```
    * These keys can be found in your Supabase project dashboard under **Project Settings > API**.

5.  **Run the Application**
    ```bash
    streamlit run app.py
    ```
    The application will open in your browser, typically at `http://localhost:8501`.

---

## ‚òÅÔ∏è Deployment

This application is designed for easy deployment on **Streamlit Community Cloud**.
1.  **Push your project to a public GitHub repository.**
2.  **Sign up** at [share.streamlit.io](https://share.streamlit.io) using your GitHub account.
3.  Click **"New app"** and select your FinVM repository.
4.  In **"Advanced settings..."**, go to the **"Secrets"** section and add your `SUPABASE_URL` and `SUPABASE_KEY`.
5.  Click **"Deploy!"**.

---

## üó∫Ô∏è Roadmap

* [ ] **Enhanced AI Models**: Integrate time-series models (like LSTM) and portfolio optimization algorithms.
* [ ] **Expanded User Features**: Add advanced order types to the Trading Game and a customizable dashboard.
* [ ] **Platform Expansion**: Implement a full payment gateway (e.g., Stripe) and expand the stock universe.

See the [open issues](https://github.com/hvm007/FinVM/issues) for a full list of proposed features and known issues.

---

## ü§ù Contributing

Contributions are what make the open-source community such an amazing place to learn, inspire, and create. Any contributions you make are **greatly appreciated**.

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---


## ‚úçÔ∏è Author

* **Harshvardhan Mishra** - [@hvm007](https://github.com/hvm007)
